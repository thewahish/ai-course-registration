<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ù…ÙˆØ²Ø¹ | Ø¯ÙˆØ±Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js"></script>
    <link rel="stylesheet" href="../assets/css/brand-styles.css">
    <style>
        .reseller-card {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
            transition: transform 0.3s ease;
        }
        
        .reseller-card:hover {
            transform: translateY(-5px);
        }
        
        .commission-badge {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 12px 20px;
            font-weight: 600;
            text-align: center;
        }
        
        .generate-code-btn {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .generate-code-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }
        
        .coupon-preview {
            background: white;
            border: 2px dashed #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .coupon-preview::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #f59e0b, #8b5cf6);
        }
        
        .qr-code-container {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f9fafb;
            border-radius: 8px;
            padding: 16px;
        }
        
        .sales-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        
        .commission-earned {
            color: #10b981;
            font-weight: 700;
            font-size: 1.25rem;
        }
        
        .pending-commission {
            color: #f59e0b;
            font-weight: 700;
            font-size: 1.25rem;
        }
        
        .print-btn {
            background: #8b5cf6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .print-btn:hover {
            background: #7c3aed;
        }
        
        @media print {
            body * { visibility: hidden; }
            .printable-coupon, .printable-coupon * { visibility: visible; }
            .printable-coupon {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="flex items-center justify-between px-6 py-4">
            <h1 class="text-2xl font-bold text-gray-800">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ù…ÙˆØ²Ø¹</h1>
            <div class="flex items-center space-x-4 space-x-reverse">
                <span id="reseller-name" class="text-gray-600">Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯</span>
                <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold" id="reseller-avatar">Ø£</div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-6 py-8">
        <!-- Reseller Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Total Sales -->
            <div class="reseller-card">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"></path>
                        <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <div class="text-3xl font-bold mb-2" id="total-sales">0</div>
                <p class="text-green-100">ØªØ°ÙƒØ±Ø© Ù…Ø¨Ø§Ø¹Ø©</p>
            </div>

            <!-- Total Commission -->
            <div class="reseller-card">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©</h3>
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"></path>
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.51-1.31c-.562-.649-1.413-1.076-2.353-1.253V5z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <div class="text-3xl font-bold mb-2 commission-earned" id="total-commission">$0</div>
                <p class="text-green-100">Ø¹Ù…ÙˆÙ„Ø© Ù…ÙƒØªØ³Ø¨Ø©</p>
            </div>

            <!-- Pending Commission -->
            <div class="reseller-card">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold">Ø¹Ù…ÙˆÙ„Ø© Ù…Ø¹Ù„Ù‚Ø©</h3>
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <div class="text-3xl font-bold mb-2 pending-commission" id="pending-commission">$0</div>
                <p class="text-green-100">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹</p>
            </div>

            <!-- Conversion Rate -->
            <div class="reseller-card">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold">Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„</h3>
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 0l-2 2a1 1 0 001.414 1.414L8 10.414l1.293 1.293a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <div class="text-3xl font-bold mb-2" id="conversion-rate">0%</div>
                <p class="text-green-100">Ù†Ø³Ø¨Ø© Ù†Ø¬Ø§Ø­ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</p>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column: Code Generation & Coupons -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Code Generation Section -->
                <div class="bg-white rounded-lg p-6 shadow-md">
                    <h2 class="text-xl font-bold mb-4">Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙƒÙˆØ§Ø¯ Ø¬Ø¯ÙŠØ¯Ø©</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</label>
                            <input type="number" id="code-quantity" class="obai-input" value="1" min="1" max="50">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ù†ÙˆØ¹ Ø§Ù„ØªØ°ÙƒØ±Ø©</label>
                            <select id="ticket-type" class="obai-input">
                                <option value="syria-paid">Ø³ÙˆØ±ÙŠØ§ - $50 (Ø¹Ù…ÙˆÙ„Ø© $5)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="flex space-x-4 space-x-reverse">
                        <button onclick="generateCodes()" class="generate-code-btn">
                            Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯
                        </button>
                        <button onclick="printAllCoupons()" class="print-btn">
                            Ø·Ø¨Ø§Ø¹Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª
                        </button>
                    </div>
                </div>

                <!-- Generated Codes Display -->
                <div class="bg-white rounded-lg p-6 shadow-md" id="generated-codes-section" style="display: none;">
                    <h2 class="text-xl font-bold mb-4">Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©</h2>
                    <div id="codes-display" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Generated codes will appear here -->
                    </div>
                </div>

                <!-- Recent Sales -->
                <div class="sales-table">
                    <div class="bg-gray-50 px-6 py-4 border-b">
                        <h2 class="text-xl font-bold">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h2>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr class="text-right">
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„ÙƒÙˆØ¯</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                </tr>
                            </thead>
                            <tbody id="recent-sales-body" class="bg-white divide-y divide-gray-200">
                                <!-- Sales data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Right Column: Commission Details & Analytics -->
            <div class="space-y-6">
                <!-- Commission Breakdown -->
                <div class="bg-white rounded-lg p-6 shadow-md">
                    <h3 class="text-lg font-semibold mb-4">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©</h3>
                    
                    <div class="commission-badge mb-4">
                        <div class="text-2xl font-bold">$5</div>
                        <div class="text-sm">Ù„ÙƒÙ„ ØªØ°ÙƒØ±Ø© $50</div>
                    </div>
                    
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between">
                            <span>Ø§Ù„ØªØ°Ø§ÙƒØ± Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©:</span>
                            <span class="font-semibold" id="tickets-sold">0</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</span>
                            <span class="font-semibold" id="total-amount">$0</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Ø¹Ù…ÙˆÙ„ØªÙƒ (10%):</span>
                            <span class="font-semibold commission-earned" id="your-commission">$0</span>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <button onclick="requestPayout()" class="obai-btn w-full">
                            Ø·Ù„Ø¨ ØµØ±Ù Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©
                        </button>
                    </div>
                </div>

                <!-- Monthly Performance Chart -->
                <div class="bg-white rounded-lg p-6 shadow-md">
                    <h3 class="text-lg font-semibold mb-4">Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø±ÙŠ</h3>
                    <canvas id="monthlyChart" width="300" height="200"></canvas>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-lg p-6 shadow-md">
                    <h3 class="text-lg font-semibold mb-4">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
                    <div class="space-y-3">
                        <button onclick="downloadSalesReport()" class="w-full text-right bg-gray-100 hover:bg-gray-200 px-4 py-3 rounded-lg transition duration-200">
                            ğŸ“Š ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
                        </button>
                        <button onclick="viewCommissionHistory()" class="w-full text-right bg-gray-100 hover:bg-gray-200 px-4 py-3 rounded-lg transition duration-200">
                            ğŸ’° Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª
                        </button>
                        <button onclick="contactSupport()" class="w-full text-right bg-gray-100 hover:bg-gray-200 px-4 py-3 rounded-lg transition duration-200">
                            ğŸ†˜ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Coupon Preview Modal -->
    <div id="coupon-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†</h3>
                <button onclick="closeCouponModal()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="coupon-content">
                <!-- Coupon will be generated here -->
            </div>
            <div class="flex space-x-3 space-x-reverse mt-4">
                <button onclick="printCoupon()" class="print-btn flex-1">Ø·Ø¨Ø§Ø¹Ø©</button>
                <button onclick="closeCouponModal()" class="obai-btn-secondary flex-1">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="reseller-dashboard.js"></script>
</body>
</html>